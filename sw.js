var STATIC_CACHE = 'bioscopen-nederland-static-cache-v1'

// listen for outgoing network request
self.addEventListener('fetch', function (event) {
    // try to find response object in the cache
    // associated with current request
    event.respondWith(
        caches.open(STATIC_CACHE).then(function (cache) {
            return cache.match(event.request).then(function (response) {
                if (response) return response;
                return fetch(event.request).then(function (networkResponse) {
                    return networkResponse;
                });
            });
        })
    );
});

self.addEventListener('activate', function (event) {
    console.log('service worker activate');
});

self.addEventListener('install', function (event) {
    event.waitUntil(
        caches.open(STATIC_CACHE).then(function (cache) {
            return cache.addAll(
                [
                    "./",
                    "css/lib/leaflet/leaflet.css",
                    "css/lib/onsen/css/onsenui.min.css",
                    "css/lib/onsen/css/onsen-css-components.min.css",
                    "css/style.css",
                    "lib/js/onsenui.min.js",
                    "cordova.js",
                    "js/offline.js",
                    "js/pwa-history.js",
                    "lib/js/leaflet.js",
                    "js/main.js",
                    "js/localization.js",
                    "https://cdn.polyfill.io/v2/polyfill.min.js",
                    "js/data.js",
                    "css/lib/onsen/css/ionicons/css/ionicons.min.css",
                    "css/lib/onsen/css/material-design-iconic-font/css/material-design-iconic-font.min.css",
                    "css/lib/onsen/css/font_awesome/css/font-awesome.min.css",
                    "manifest.json",
                    "views/splitter.html",

                    "cordova_plugins.js",
                    "plugins/cordova-plugin-device/www/device.js",
                    "plugins/cordova-plugin-device/src/browser/DeviceProxy.js",
                    "plugins/cordova-plugin-dialogs/www/notification.js",
                    "plugins/cordova-plugin-dialogs/www/browser/notification.js",
                    "plugins/cordova-plugin-admobpro/www/AdMob.js",
                    "plugins/cordova-plugin-statusbar/www/statusbar.js",
                    "plugins/cordova-plugin-statusbar/src/browser/StatusBarProxy.js",
                    "plugins/cordova-plugin-splashscreen/www/splashscreen.js",
                    "plugins/cordova-plugin-splashscreen/src/browser/SplashScreenProxy.js",

                    "views/home.html",
                    "views/home.html",
                    "css/lib/onsen/css/material-design-iconic-font/fonts/Material-Design-Iconic-Font.woff2",
                    "css/lib/onsen/css/ionicons/fonts/ionicons.ttf",
                    "js/browser.js",
                    "css/lib/onsen/css/font_awesome/fonts/fontawesome-webfont.woff2?v=4.7.0",
                    "views/detail.html",
                    "views/about.html",
                    "images/logo.png",
                    "views/map.html",
                    "css/lib/leaflet/images/marker-icon-purple.png",
                    "css/lib/leaflet/images/marker-shadow.png",

                    "maps/offline/10/521/339.png",
                    "maps/offline/10/521/340.png",
                    "maps/offline/10/521/341.png",
                    "maps/offline/10/522/338.png",
                    "maps/offline/10/522/339.png",
                    "maps/offline/10/522/340.png",
                    "maps/offline/10/522/341.png",
                    "maps/offline/10/522/342.png",
                    "maps/offline/10/523/337.png",
                    "maps/offline/10/523/338.png",
                    "maps/offline/10/523/339.png",
                    "maps/offline/10/523/340.png",
                    "maps/offline/10/523/341.png",
                    "maps/offline/10/524/333.png",
                    "maps/offline/10/524/334.png",
                    "maps/offline/10/524/335.png",
                    "maps/offline/10/524/336.png",
                    "maps/offline/10/524/337.png",
                    "maps/offline/10/524/338.png",
                    "maps/offline/10/524/339.png",
                    "maps/offline/10/524/340.png",
                    "maps/offline/10/524/341.png",
                    "maps/offline/10/525/332.png",
                    "maps/offline/10/525/333.png",
                    "maps/offline/10/525/334.png",
                    "maps/offline/10/525/335.png",
                    "maps/offline/10/525/336.png",
                    "maps/offline/10/525/337.png",
                    "maps/offline/10/525/338.png",
                    "maps/offline/10/525/339.png",
                    "maps/offline/10/525/340.png",
                    "maps/offline/10/525/341.png",
                    "maps/offline/10/526/331.png",
                    "maps/offline/10/526/332.png",
                    "maps/offline/10/526/333.png",
                    "maps/offline/10/526/334.png",
                    "maps/offline/10/526/335.png",
                    "maps/offline/10/526/336.png",
                    "maps/offline/10/526/337.png",
                    "maps/offline/10/526/338.png",
                    "maps/offline/10/526/339.png",
                    "maps/offline/10/526/340.png",
                    "maps/offline/10/526/341.png",
                    "maps/offline/10/527/331.png",
                    "maps/offline/10/527/332.png",
                    "maps/offline/10/527/333.png",
                    "maps/offline/10/527/334.png",
                    "maps/offline/10/527/335.png",
                    "maps/offline/10/527/336.png",
                    "maps/offline/10/527/337.png",
                    "maps/offline/10/527/338.png",
                    "maps/offline/10/527/339.png",
                    "maps/offline/10/527/340.png",
                    "maps/offline/10/527/341.png",
                    "maps/offline/10/527/342.png",
                    "maps/offline/10/527/343.png",
                    "maps/offline/10/528/330.png",
                    "maps/offline/10/528/331.png",
                    "maps/offline/10/528/332.png",
                    "maps/offline/10/528/333.png",
                    "maps/offline/10/528/334.png",
                    "maps/offline/10/528/335.png",
                    "maps/offline/10/528/336.png",
                    "maps/offline/10/528/337.png",
                    "maps/offline/10/528/338.png",
                    "maps/offline/10/528/339.png",
                    "maps/offline/10/528/340.png",
                    "maps/offline/10/528/341.png",
                    "maps/offline/10/528/342.png",
                    "maps/offline/10/528/343.png",
                    "maps/offline/10/528/344.png",
                    "maps/offline/10/529/330.png",
                    "maps/offline/10/529/331.png",
                    "maps/offline/10/529/332.png",
                    "maps/offline/10/529/333.png",
                    "maps/offline/10/529/334.png",
                    "maps/offline/10/529/335.png",
                    "maps/offline/10/529/336.png",
                    "maps/offline/10/529/337.png",
                    "maps/offline/10/529/338.png",
                    "maps/offline/10/529/339.png",
                    "maps/offline/10/529/340.png",
                    "maps/offline/10/529/341.png",
                    "maps/offline/10/529/342.png",
                    "maps/offline/10/529/343.png",
                    "maps/offline/10/529/344.png",
                    "maps/offline/10/530/330.png",
                    "maps/offline/10/530/331.png",
                    "maps/offline/10/530/332.png",
                    "maps/offline/10/530/333.png",
                    "maps/offline/10/530/334.png",
                    "maps/offline/10/530/335.png",
                    "maps/offline/10/530/336.png",
                    "maps/offline/10/530/337.png",
                    "maps/offline/10/530/338.png",
                    "maps/offline/10/530/339.png",
                    "maps/offline/10/531/330.png",
                    "maps/offline/10/531/331.png",
                    "maps/offline/10/531/332.png",
                    "maps/offline/10/531/333.png",
                    "maps/offline/10/531/334.png",
                    "maps/offline/10/531/335.png",
                    "maps/offline/10/531/336.png",
                    "maps/offline/10/531/337.png",
                    "maps/offline/10/531/338.png",
                    "maps/offline/10/532/331.png",
                    "maps/offline/10/532/332.png",
                    "maps/offline/10/532/333.png",
                    "maps/offline/10/532/334.png",
                    "maps/offline/10/532/335.png",
                    "maps/offline/10/532/336.png",
                    "maps/offline/10/532/337.png",
                    "maps/offline/9/260/169.png",
                    "maps/offline/9/260/170.png",
                    "maps/offline/9/261/168.png",
                    "maps/offline/9/261/169.png",
                    "maps/offline/9/261/170.png",
                    "maps/offline/9/261/171.png",
                    "maps/offline/9/262/166.png",
                    "maps/offline/9/262/167.png",
                    "maps/offline/9/262/168.png",
                    "maps/offline/9/262/169.png",
                    "maps/offline/9/262/170.png",
                    "maps/offline/9/263/165.png",
                    "maps/offline/9/263/166.png",
                    "maps/offline/9/263/167.png",
                    "maps/offline/9/263/168.png",
                    "maps/offline/9/263/169.png",
                    "maps/offline/9/263/170.png",
                    "maps/offline/9/263/171.png",
                    "maps/offline/9/264/165.png",
                    "maps/offline/9/264/166.png",
                    "maps/offline/9/264/167.png",
                    "maps/offline/9/264/168.png",
                    "maps/offline/9/264/169.png",
                    "maps/offline/9/264/170.png",
                    "maps/offline/9/264/171.png",
                    "maps/offline/9/264/172.png",
                    "maps/offline/9/265/165.png",
                    "maps/offline/9/265/166.png",
                    "maps/offline/9/265/167.png",
                    "maps/offline/9/265/168.png",
                    "maps/offline/9/265/169.png",
                    "maps/offline/9/266/165.png",
                    "maps/offline/9/266/166.png",
                    "maps/offline/9/266/167.png",
                    "maps/offline/9/266/168.png"
                ]
            );
        })
    );
});
